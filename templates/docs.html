<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API - –ó–∞–≥—Ä—É–∑—á–∏–∫</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚¨áÔ∏è</text></svg>">
    
    <!-- Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons: Phosphor Icons -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    
    <!-- Highlight.js for code -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <style>
        :root {
            --bg-body: #ffffff;
            --bg-sidebar: #f9f9f9;
            --bg-code: #f6f8fa;
            --text-main: #111111;
            --text-secondary: #666666;
            --border-color: #e5e5e5;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
            --font-family: 'Inter', sans-serif;
            --radius-md: 12px;
            --accent-color: #000000;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--bg-body);
            color: var(--text-main);
            line-height: 1.6;
        }

        header {
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            border-bottom: 1px solid var(--border-color);
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .logo {
            font-weight: 700;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            color: var(--text-main);
        }

        .header-actions {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .header-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 14px;
            transition: color 0.2s;
        }

        .header-link:hover {
            color: var(--text-main);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 24px;
        }

        .page-title {
            font-size: 42px;
            font-weight: 700;
            margin-bottom: 12px;
        }

        .page-subtitle {
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 48px;
        }

        .section {
            margin-bottom: 48px;
        }

        .section-title {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--border-color);
        }

        .endpoint {
            background: var(--bg-code);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 24px;
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }

        .method-badge {
            padding: 4px 12px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 13px;
            font-family: 'Courier New', monospace;
        }

        .method-get { background: #d4edda; color: #155724; }
        .method-post { background: #cce5ff; color: #004085; }
        .method-delete { background: #f8d7da; color: #721c24; }

        .endpoint-path {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            font-weight: 500;
        }

        .endpoint-description {
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .params-title {
            font-weight: 600;
            margin: 16px 0 8px 0;
            font-size: 14px;
        }

        .param-table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 12px 0;
            max-width: 100%;
            width: 100%;
        }

        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 0;
            min-width: 500px; /* –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
            table-layout: auto;
        }

        .param-table th,
        .param-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .param-table th {
            font-weight: 600;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .param-name {
            font-family: 'Courier New', monospace;
            font-weight: 500;
        }

        .code-block {
            background: var(--bg-code);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 16px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 16px 0;
            max-width: 100%;
        }

        .code-block pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
        }

        .code-block code {
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
        }

        .response-example {
            background: #f0f8ff;
            border-left: 4px solid #0066cc;
            padding: 16px;
            border-radius: 4px;
            margin: 16px 0;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            max-width: 100%;
        }

        .response-example pre {
            margin: 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
        }

        .response-example code {
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: pre-wrap;
        }

        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px 16px;
            border-radius: 4px;
            margin: 16px 0;
            font-size: 14px;
        }

        /* Test Panel Styles */
        .test-panel {
            background: #f8f9fa;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 20px;
            margin: 20px 0;
        }

        .test-panel-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .test-form {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .test-form-row {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .test-form-row > * {
            flex: 1;
            min-width: 200px;
        }

        .test-input {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: var(--font-family);
            font-size: 14px;
            transition: border-color 0.2s;
        }

        .test-input:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .test-textarea {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: var(--font-family);
            font-size: 14px;
            min-height: 100px;
            resize: vertical;
            transition: border-color 0.2s;
        }

        .test-textarea:focus {
            outline: none;
            border-color: var(--accent-color);
        }

        .test-file-input {
            width: 100%;
            padding: 10px 14px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-family: var(--font-family);
            font-size: 14px;
            background: white;
            cursor: pointer;
        }

        .test-button {
            padding: 10px 20px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-family: var(--font-family);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s, transform 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .test-button:hover:not(:disabled) {
            background: #333;
            transform: translateY(-1px);
        }

        .test-button:active:not(:disabled) {
            transform: translateY(0);
        }

        .test-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .test-result {
            margin-top: 16px;
            padding: 16px;
            border-radius: 8px;
            display: none;
        }

        .test-result.show {
            display: block;
        }

        .test-result.success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
        }

        .test-result.error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        .test-result.loading {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            color: #0c5460;
        }

        .test-result-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .test-result-content {
            font-family: 'Courier New', monospace;
            font-size: 13px;
            white-space: pre-wrap;
            word-wrap: break-word;
            max-height: 400px;
            overflow-y: auto;
            background: rgba(0,0,0,0.05);
            padding: 12px;
            border-radius: 4px;
            margin-top: 8px;
        }

        .test-result-content a {
            color: #0066cc;
            text-decoration: underline;
        }

        .test-result-content a:hover {
            color: #0052a3;
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .file-info {
            background: rgba(255,255,255,0.5);
            padding: 12px;
            border-radius: 6px;
            margin: 8px 0;
        }

        .file-info-item {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            font-size: 13px;
        }

        .file-info-label {
            font-weight: 500;
        }

        .history-item {
            background: rgba(255,255,255,0.5);
            padding: 12px;
            border-radius: 6px;
            margin: 8px 0;
            border-left: 3px solid var(--accent-color);
        }

        .history-item-header {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .history-item-details {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .test-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            border-bottom: 2px solid var(--border-color);
        }

        .test-tab {
            padding: 8px 16px;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            font-family: var(--font-family);
            font-size: 14px;
            font-weight: 500;
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: -2px;
        }

        .test-tab:hover {
            color: var(--text-main);
        }

        .test-tab.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
        }

        .test-tab-content {
            display: none;
        }

        .test-tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .page-title { font-size: 32px; }
            .container { 
                padding: 24px 16px;
                max-width: 100%;
                overflow-x: hidden;
            }
            
            .endpoint {
                padding: 16px;
                overflow-x: hidden;
                max-width: 100%;
                box-sizing: border-box;
            }
            
            .endpoint * {
                max-width: 100%;
            }
            
            .param-table-wrapper {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                margin: 12px 0;
                max-width: 100%;
                width: 100%;
                display: block;
            }
            
            .param-table {
                font-size: 11px;
                min-width: 600px;
                width: 100%;
            }
            
            .param-table th,
            .param-table td {
                padding: 6px 8px;
                white-space: normal;
                word-wrap: break-word;
                overflow-wrap: break-word;
                vertical-align: top;
            }
            
            .param-table th:first-child,
            .param-table td:first-child {
                min-width: 100px;
                max-width: 120px;
            }
            
            .param-table th:nth-child(2),
            .param-table td:nth-child(2) {
                min-width: 80px;
                max-width: 100px;
            }
            
            .param-table th:last-child,
            .param-table td:last-child {
                min-width: 200px;
            }
            
            .param-table code {
                font-size: 10px;
                word-break: break-all;
            }
            
            .code-block {
                padding: 12px;
                font-size: 12px;
            }
            
            .code-block pre,
            .code-block code {
                font-size: 12px;
            }
            
            .response-example {
                padding: 12px;
            }
            
            .response-example pre,
            .response-example code {
                font-size: 12px;
            }
            
            .endpoint-path {
                font-size: 14px;
                word-break: break-all;
            }
            
            body {
                overflow-x: hidden;
                width: 100%;
            }

            .test-form-row {
                flex-direction: column;
            }

            .test-form-row > * {
                min-width: 100%;
            }

            .test-button {
                width: 100%;
            }
        }
    </style>
</head>
<body>

    <header>
        <a href="/" class="logo">
            <i class="ph-fill ph-download-simple"></i>
            <span>–ó–∞–≥—Ä—É–∑—á–∏–∫</span>
        </a>
        <div class="header-actions">
            <a href="/" class="header-link">–ì–ª–∞–≤–Ω–∞—è</a>
            <button id="api-status-btn" class="header-link" style="background: none; border: none; cursor: pointer; padding: 0;">
                <span id="api-status-text">–°—Ç–∞—Ç—É—Å API</span>
            </button>
        </div>
    </header>

    <div class="container">
        <h1 class="page-title">–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API</h1>
        <p class="page-subtitle">–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é API –ó–∞–≥—Ä—É–∑—á–∏–∫–∞</p>
        
        <div class="note" style="background: #e3f2fd; border-left-color: #1976d2; margin-bottom: 24px;">
            <strong>üåê –ë–∞–∑–æ–≤—ã–π URL API:</strong> <code>https://download.dreampartners.online</code><br>
            –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –Ω–∞ —ç—Ç–æ—Ç –¥–æ–º–µ–Ω.
        </div>

        <!-- Download Endpoint -->
        <div class="section">
            <h2 class="section-title">–ó–∞–≥—Ä—É–∑–∫–∞ –ú–µ–¥–∏–∞</h2>
            
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method-badge method-post">POST</span>
                    <span class="endpoint-path">/download</span>
                </div>
                <div class="endpoint-description">
                    –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ–¥–∏–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º (YouTube, Instagram, TikTok, SoundCloud). 
                    <strong>–í–∞–∂–Ω–æ:</strong> –§–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Telegram –≥—Ä—É–ø–ø—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è <code>telegram_file_id</code> –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∫—ç—à. 
                    –ï—Å–ª–∏ —Ñ–∞–π–ª —É–∂–µ –µ—Å—Ç—å –≤ –∫—ç—à–µ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –∫—ç—à–∞ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏.
                </div>
                
                <div class="params-title">–ü–æ–ª–Ω—ã–π URL —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞:</div>
                <div class="code-block">
                    <pre><code>POST https://download.dreampartners.online/download</code></pre>
                </div>

                <div class="params-title">Request Body:</div>
                <div class="param-table-wrapper">
                    <table class="param-table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Required</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="param-name">url</td>
                                <td>string</td>
                                <td>Yes</td>
                                <td>URL of the media to download</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="code-block">
                    <pre><code class="language-json">{
  "url": "https://youtube.com/watch?v=..."
}</code></pre>
                </div>

                <div class="params-title">Response (Success - –ù–æ–≤—ã–π —Ñ–∞–π–ª):</div>
                <div class="response-example">
                    <pre><code>{
  "status": "success",
  "cached": false,
  "files": [
    {
      "path": "downloads/uuid/video.mp4",
      "filename": "video.mp4",
      "url": "https://download.dreampartners.online/files/...",
      "size": 1024000,
      "telegram_file_id": "BAACAgIAAxkBAAI...",
      "bot_link": "https://t.me/bot_username?start=file_123",
      "cache_id": 123,
      "normalized_url": "https://youtube.com/watch?v=...",
      "media_type": "video"
    }
  ],
  "task_id": "uuid",
  "normalized_url": "https://youtube.com/watch?v=...",
  "telegram_file_ids": ["BAACAgIAAxkBAAI..."],
  "cache_id": 123
}</code></pre>
                </div>

                <div class="params-title">Response (Error):</div>
                <div class="response-example">
                    <pre><code>{
  "status": "error",
  "message": "Error description"
}</code></pre>
                </div>

                <!-- Test Panel -->
                <div class="test-panel">
                    <div class="test-panel-title">
                        <i class="ph ph-flask"></i>
                        <span>–¢–µ—Å—Ç API</span>
                    </div>
                    <form class="test-form" id="test-download-form">
                        <div class="test-form-row">
                            <input 
                                type="url" 
                                class="test-input" 
                                id="test-download-url" 
                                placeholder="–í—Å—Ç–∞–≤—å—Ç–µ URL (YouTube, Instagram, TikTok, SoundCloud)"
                                required
                            />
                            <button type="submit" class="test-button" id="test-download-btn">
                                <span>–ó–∞–≥—Ä—É–∑–∏—Ç—å</span>
                            </button>
                        </div>
                        <div class="test-result" id="test-download-result"></div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Transcribe Endpoint -->
        <div class="section">
            <h2 class="section-title">Transcribe Audio/Video</h2>
            
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method-badge method-post">POST</span>
                    <span class="endpoint-path">/transcribe</span>
                </div>
                <div class="endpoint-description">
                    Convert speech to text from audio or video files. Can accept URL or file upload.
                </div>

                <div class="params-title">Option 1: URL (JSON):</div>
                <div class="code-block">
                    <pre><code class="language-json">{
  "url": "https://youtube.com/watch?v=..."
}</code></pre>
                </div>

                <div class="params-title">Option 2: File Upload (Multipart):</div>
                <div class="code-block">
                    <pre><code>Content-Type: multipart/form-data
Field: file (binary)</code></pre>
                </div>

                <div class="params-title">Response:</div>
                <div class="response-example">
                    <pre><code>{
  "status": "success",
  "text": "Transcribed text here..."
}</code></pre>
                </div>

                <div class="note">
                    <strong>Note:</strong> Transcription uses Google Speech Recognition API. Supports Russian and English languages.
                </div>

                <!-- Test Panel -->
                <div class="test-panel">
                    <div class="test-panel-title">
                        <i class="ph ph-flask"></i>
                        <span>–¢–µ—Å—Ç API</span>
                    </div>
                    <form class="test-form" id="test-transcribe-form">
                        <div style="margin-bottom: 12px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">–í–∞—Ä–∏–∞–Ω—Ç 1: URL</label>
                            <div class="test-form-row">
                                <input 
                                    type="url" 
                                    class="test-input" 
                                    id="test-transcribe-url" 
                                    placeholder="–í—Å—Ç–∞–≤—å—Ç–µ URL –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ"
                                />
                                <button type="button" class="test-button" id="test-transcribe-url-btn">
                                    <span>–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –ø–æ URL</span>
                                </button>
                            </div>
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: 500;">–í–∞—Ä–∏–∞–Ω—Ç 2: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞</label>
                            <div class="test-form-row">
                                <input 
                                    type="file" 
                                    class="test-file-input" 
                                    id="test-transcribe-file" 
                                    accept="audio/*,video/*"
                                />
                                <button type="button" class="test-button" id="test-transcribe-file-btn">
                                    <span>–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª</span>
                                </button>
                            </div>
                        </div>
                        <div class="test-result" id="test-transcribe-result"></div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Summary Endpoint -->
        <div class="section">
            <h2 class="section-title">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –°–∞–º–º–∞—Ä–∏</h2>
            
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method-badge method-post">POST</span>
                    <span class="endpoint-path">/summary</span>
                </div>
                <div class="endpoint-description">
                    –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–∞—Ç–∫–æ–≥–æ —Å–∞–º–º–∞—Ä–∏ –∏–∑ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AI.
                </div>
                
                <div class="params-title">–ü–æ–ª–Ω—ã–π URL —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞:</div>
                <div class="code-block">
                    <pre><code>POST https://download.dreampartners.online/summary</code></pre>
                </div>

                <div class="params-title">Request Body:</div>
                <div class="code-block">
                    <pre><code class="language-json">{
  "text": "Long text to summarize..."
}</code></pre>
                </div>

                <div class="params-title">Response:</div>
                <div class="response-example">
                    <pre><code>{
  "status": "success",
  "summary": "1. Key point one\n2. Key point two..."
}</code></pre>
                </div>

                <!-- Test Panel -->
                <div class="test-panel">
                    <div class="test-panel-title">
                        <i class="ph ph-flask"></i>
                        <span>–¢–µ—Å—Ç API</span>
                    </div>
                    <form class="test-form" id="test-summary-form">
                        <div class="test-tabs">
                            <button type="button" class="test-tab active" data-tab="text">–¢–µ–∫—Å—Ç</button>
                            <button type="button" class="test-tab" data-tab="url">URL</button>
                            <button type="button" class="test-tab" data-tab="file">–§–∞–π–ª</button>
                        </div>
                        
                        <div class="test-tab-content active" id="test-summary-tab-text">
                            <textarea 
                                class="test-textarea" 
                                id="test-summary-text" 
                                placeholder="–í—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–∞–º–º–∞—Ä–∏..."
                            ></textarea>
                        </div>
                        
                        <div class="test-tab-content" id="test-summary-tab-url">
                            <input 
                                type="url" 
                                class="test-input" 
                                id="test-summary-url" 
                                placeholder="–í—Å—Ç–∞–≤—å—Ç–µ URL –≤–∏–¥–µ–æ/–∞—É–¥–∏–æ –¥–ª—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ –∏ —Å–∞–º–º–∞—Ä–∏"
                            />
                        </div>
                        
                        <div class="test-tab-content" id="test-summary-tab-file">
                            <input 
                                type="file" 
                                class="test-file-input" 
                                id="test-summary-file" 
                                accept="audio/*,video/*"
                            />
                        </div>
                        
                        <button type="submit" class="test-button" id="test-summary-btn">
                            <span>–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º–º–∞—Ä–∏</span>
                        </button>
                        <div class="test-result" id="test-summary-result"></div>
                    </form>
                </div>
            </div>
        </div>

        <!-- History Endpoints -->
        <div class="section">
            <h2 class="section-title">History Management</h2>
            
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method-badge method-get">GET</span>
                    <span class="endpoint-path">/api/history</span>
                </div>
                <div class="endpoint-description">
                    Get download history for current session.
                </div>

                <div class="params-title">Response:</div>
                <div class="response-example">
                    <pre><code>{
  "status": "success",
  "history": [
    {
      "id": "uuid",
      "filename": "video.mp4",
      "url": "https://...",
      "size": 1024000,
      "added_at": "2025-01-20T10:00:00"
    }
  ]
}</code></pre>
                </div>

                <!-- Test Panel -->
                <div class="test-panel">
                    <div class="test-panel-title">
                        <i class="ph ph-flask"></i>
                        <span>–¢–µ—Å—Ç API</span>
                    </div>
                    <div class="test-form">
                        <button type="button" class="test-button" id="test-history-get-btn">
                            <span>–ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é</span>
                        </button>
                        <div class="test-result" id="test-history-result"></div>
                    </div>
                </div>
            </div>

            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method-badge method-delete">DELETE</span>
                    <span class="endpoint-path">/api/history/{file_id}</span>
                </div>
                <div class="endpoint-description">
                    Delete a file from history.
                </div>

                <div class="params-title">Response:</div>
                <div class="response-example">
                    <pre><code>{
  "status": "success"
}</code></pre>
                </div>

                <!-- Test Panel -->
                <div class="test-panel">
                    <div class="test-panel-title">
                        <i class="ph ph-flask"></i>
                        <span>–¢–µ—Å—Ç API</span>
                    </div>
                    <form class="test-form" id="test-history-delete-form">
                        <div class="test-form-row">
                            <input 
                                type="text" 
                                class="test-input" 
                                id="test-history-delete-id" 
                                placeholder="–í–≤–µ–¥–∏—Ç–µ file_id –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è"
                                required
                            />
                            <button type="submit" class="test-button" id="test-history-delete-btn">
                                <span>–£–¥–∞–ª–∏—Ç—å –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏</span>
                            </button>
                        </div>
                        <div class="test-result" id="test-history-delete-result"></div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Telegram Upload -->
        <div class="section">
            <h2 class="section-title">–ó–∞–≥—Ä—É–∑–∫–∞ –≤ Telegram</h2>
            
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method-badge method-post">POST</span>
                    <span class="endpoint-path">/api/telegram/upload</span>
                </div>
                <div class="endpoint-description">
                    –ü–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –±–æ—Ç–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞. –§–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Telegram, –ø–æ–ª—É—á–∞–µ—Ç file_id –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –≤–∏–¥–∞ <code>https://t.me/bot_username?start=file_{cache_id}</code>
                </div>

                <div class="params-title">Request Body:</div>
                <div class="code-block">
                    <pre><code class="language-json">{
  "file_id": "uuid-from-history"
}</code></pre>
                </div>

                <div class="params-title">Response (–£—Å–ø–µ—Ö):</div>
                <div class="response-example">
                    <pre><code>{
  "status": "success",
  "bot_link": "https://t.me/bot_username?start=file_123",
  "cache_id": 123,
  "telegram_file_id": "BAACAgIAAxkBAAI...",
  "message": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç—É —Å—Å—ã–ª–∫—É –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞ –≤ –±–æ—Ç–µ"
}</code></pre>
                </div>

                <div class="note">
                    <strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong> –§–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤ Telegram –≥—Ä—É–ø–ø—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è <code>file_id</code>, –∑–∞—Ç–µ–º —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö. 
                    –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Å—ã–ª–∫–∏ –±–æ—Ç –ø–æ–∫–∞–∂–µ—Ç —Ñ–∞–π–ª —Å –æ–ø—Ü–∏—è–º–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏. –ï—Å–ª–∏ —Ñ–∞–π–ª —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω –≤ Telegram, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å—Å—ã–ª–∫–∞ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏.
                </div>

                <!-- Test Panel -->
                <div class="test-panel">
                    <div class="test-panel-title">
                        <i class="ph ph-flask"></i>
                        <span>–¢–µ—Å—Ç API</span>
                    </div>
                    <form class="test-form" id="test-telegram-upload-form">
                        <div class="test-form-row">
                            <input 
                                type="text" 
                                class="test-input" 
                                id="test-telegram-upload-file-id" 
                                placeholder="–í–≤–µ–¥–∏—Ç–µ file_id –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏"
                                required
                            />
                            <button type="submit" class="test-button" id="test-telegram-upload-btn">
                                <span>–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ Telegram</span>
                            </button>
                        </div>
                        <div class="test-result" id="test-telegram-upload-result"></div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Full Process Cycle -->
        <div class="section">
            <h2 class="section-title">–ü–æ–ª–Ω—ã–π –¶–∏–∫–ª –û–±—Ä–∞–±–æ—Ç–∫–∏</h2>
            
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method-badge method-post">POST</span>
                    <span class="endpoint-path">/api/process</span>
                </div>
                <div class="endpoint-description">
                    –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –°–∫–∞—á–∞—Ç—å ‚Üí –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å ‚Üí –°–∞–º–º–∞—Ä–∏. –í—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ —Ç—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.
                </div>

                <div class="params-title">Request Body:</div>
                <div class="code-block">
                    <pre><code class="language-json">{
  "url": "https://youtube.com/watch?v=..."
}</code></pre>
                </div>

                <div class="params-title">Response:</div>
                <div class="response-example">
                    <pre><code>{
  "status": "success",
  "file": {
    "id": "uuid",
    "filename": "video.mp4",
    "url": "https://...",
    "size": 1024000
  },
  "transcription": "–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏...",
  "summary": "1. –ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç\n2. –í—Ç–æ—Ä–æ–π –º–æ–º–µ–Ω—Ç..."
}</code></pre>
                </div>

                <div class="note">
                    <strong>–í–∞–∂–Ω–æ:</strong> –≠—Ç–æ—Ç endpoint –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ —Ç—Ä–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ. –ü—Ä–æ—Ü–µ—Å—Å –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞.
                </div>

                <!-- Test Panel -->
                <div class="test-panel">
                    <div class="test-panel-title">
                        <i class="ph ph-flask"></i>
                        <span>–¢–µ—Å—Ç API</span>
                    </div>
                    <form class="test-form" id="test-process-form">
                        <div class="test-form-row">
                            <input 
                                type="url" 
                                class="test-input" 
                                id="test-process-url" 
                                placeholder="–í—Å—Ç–∞–≤—å—Ç–µ URL –¥–ª—è –ø–æ–ª–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏"
                                required
                            />
                            <button type="submit" class="test-button" id="test-process-btn">
                                <span>–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª</span>
                            </button>
                        </div>
                        <div class="test-result" id="test-process-result"></div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Health Check / Status -->
        <div class="section">
            <h2 class="section-title">–°—Ç–∞—Ç—É—Å API</h2>
            
            <div class="endpoint">
                <div class="endpoint-header">
                    <span class="method-badge method-get">GET</span>
                    <span class="endpoint-path">/health</span>
                </div>
                <div class="endpoint-description">
                    –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞ API. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞.
                </div>
                
                <div class="params-title">–ü–æ–ª–Ω—ã–π URL —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞:</div>
                <div class="code-block">
                    <pre><code>GET https://download.dreampartners.online/health</code></pre>
                </div>

                <div class="params-title">–û—Ç–≤–µ—Ç (–°–µ—Ä–≤–∏—Å –æ–Ω–ª–∞–π–Ω):</div>
                <div class="response-example">
                    <pre><code>{
  "status": "ok",
  "service": "download-api"
}</code></pre>
                </div>

                <div class="params-title">–ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤:</div>
                <div class="param-table-wrapper">
                    <table class="param-table">
                        <thead>
                            <tr>
                                <th>–ö–æ–¥</th>
                                <th>–°—Ç–∞—Ç—É—Å</th>
                                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>200</td>
                                <td>OK</td>
                                <td>–°–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç</td>
                            </tr>
                            <tr>
                                <td>503</td>
                                <td>Service Unavailable</td>
                                <td>–°–µ—Ä–≤–∏—Å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="note">
                    <strong>–°–æ–≤–µ—Ç:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK, –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω.
                </div>
            </div>
        </div>

        <!-- Supported Platforms -->
        <div class="section">
            <h2 class="section-title">Supported Platforms</h2>
            <ul style="list-style: none; padding: 0;">
                <li style="padding: 8px 0;">‚úì YouTube (youtube.com, youtu.be)</li>
                <li style="padding: 8px 0;">‚úì Instagram (instagram.com)</li>
                <li style="padding: 8px 0;">‚úì TikTok (tiktok.com, vt.tiktok.com)</li>
                <li style="padding: 8px 0;">‚úì SoundCloud (soundcloud.com)</li>
            </ul>
        </div>

        <!-- Example Usage -->
        <div class="section">
            <h2 class="section-title">Example Usage</h2>
            
            <div class="code-block">
                <pre><code class="language-javascript">// –ë–∞–∑–æ–≤—ã–π URL API
const API_BASE_URL = 'https://download.dreampartners.online';

// Download video
const response = await fetch(`${API_BASE_URL}/download`, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    url: 'https://youtube.com/watch?v=...'
  })
});

const data = await response.json();
if (data.status === 'success') {
  console.log('Files:', data.files);
  console.log('Download URL:', data.files[0].url);
  console.log('Telegram file_id:', data.files[0].telegram_file_id);
  console.log('Bot link:', data.files[0].bot_link);
}</code></pre>
            </div>

            <div class="code-block">
                <pre><code class="language-python">import requests

# –ë–∞–∑–æ–≤—ã–π URL API
API_BASE_URL = 'https://download.dreampartners.online'

# Download video
response = requests.post(
    f'{API_BASE_URL}/download',
    json={'url': 'https://youtube.com/watch?v=...'}
)

data = response.json()
if data['status'] == 'success':
    print('Files:', data['files'])
    print('Download URL:', data['files'][0]['url'])
    print('Telegram file_id:', data['files'][0]['telegram_file_id'])
    print('Bot link:', data['files'][0]['bot_link'])
    print('Cache ID:', data.get('cache_id'))
    print('Is carousel:', data.get('is_carousel', False))</code></pre>
            </div>
            
            <div class="code-block">
                <pre><code class="language-curl"># –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ cURL
curl -X POST https://download.dreampartners.online/download \
  -H "Content-Type: application/json" \
  -d '{"url": "https://youtube.com/watch?v=..."}'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ API
curl https://download.dreampartners.online/health</code></pre>
            </div>
        </div>

        <!-- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ -->
        <div class="section">
            <h2 class="section-title">–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ Telegram File ID</h2>
            
            <div class="endpoint">
                <div class="endpoint-description">
                    <p>–°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫—ç—à–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:</p>
                    <ul style="margin: 16px 0; padding-left: 24px;">
                        <li style="padding: 8px 0;"><strong>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≤ Telegram:</strong> –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª —Å—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Telegram –≥—Ä—É–ø–ø—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è <code>telegram_file_id</code></li>
                        <li style="padding: 8px 0;"><strong>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫—ç—à:</strong> URL –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç—Å—è (—É–±–∏—Ä–∞—é—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –∫ –µ–¥–∏–Ω–æ–º—É –≤–∏–¥—É) –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –≤–º–µ—Å—Ç–µ —Å <code>file_id</code></li>
                        <li style="padding: 8px 0;"><strong>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞:</strong> –ü–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–∞ –≤ –∫—ç—à–µ. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –∫—ç—à–∞ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏</li>
                        <li style="padding: 8px 0;"><strong>Bot Deep Links:</strong> –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å—Å—ã–ª–∫–∞ –≤–∏–¥–∞ <code>https://t.me/bot_username?start=file_{cache_id}</code>, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –≤ –±–æ—Ç–µ —Å –æ–ø—Ü–∏—è–º–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏</li>
                    </ul>
                </div>

                <div class="params-title">–ü–æ–ª—è –æ—Ç–≤–µ—Ç–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ:</div>
                <div class="param-table-wrapper">
                    <table class="param-table">
                        <thead>
                            <tr>
                                <th>–ü–æ–ª–µ</th>
                                <th>–¢–∏–ø</th>
                                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                            </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td class="param-name">telegram_file_id</td>
                            <td>string</td>
                            <td>ID —Ñ–∞–π–ª–∞ –≤ Telegram (–ø–æ–ª—É—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ)</td>
                        </tr>
                        <tr>
                            <td class="param-name">bot_link</td>
                            <td>string</td>
                            <td>–°—Å—ã–ª–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è —Ñ–∞–π–ª–∞ –≤ –±–æ—Ç–µ: <code>https://t.me/bot_username?start=file_{cache_id}</code></td>
                        </tr>
                        <tr>
                            <td class="param-name">cache_id</td>
                            <td>integer</td>
                            <td>ID –∑–∞–ø–∏—Å–∏ –≤ –∫—ç—à–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</td>
                        </tr>
                        <tr>
                            <td class="param-name">normalized_url</td>
                            <td>string</td>
                            <td>–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π URL (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—ç—à–∞)</td>
                        </tr>
                        <tr>
                            <td class="param-name">media_type</td>
                            <td>string</td>
                            <td>–¢–∏–ø –º–µ–¥–∏–∞: <code>video</code>, <code>audio</code>, <code>photo</code>, <code>document</code></td>
                        </tr>
                        <tr>
                            <td class="param-name">cached</td>
                            <td>boolean</td>
                            <td><code>true</code> –µ—Å–ª–∏ —Ñ–∞–π–ª –≤–∑—è—Ç –∏–∑ –∫—ç—à–∞, <code>false</code> –µ—Å–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω –∑–∞–Ω–æ–≤–æ</td>
                        </tr>
                    </tbody>
                    </table>
                </div>

                <div class="note">
                    <strong>–í–∞–∂–Ω–æ:</strong> –í—Å–µ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç <code>telegram_file_id</code> –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ. 
                    –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ Telegram –±–æ—Ç–µ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏. 
                    –ö—ç—à —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö URL, –ø–æ—ç—Ç–æ–º—É —Å—Å—ã–ª–∫–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, <code>?t=10</code>) —Å—á–∏—Ç–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏.
                </div>
            </div>
        </div>

    </div>

    <script>
        // Highlight code blocks
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('pre code').forEach((block) => {
                hljs.highlightElement(block);
            });
        });

        // API Status check
        const statusBtn = document.getElementById('api-status-btn');
        const statusText = document.getElementById('api-status-text');
        
        async function checkApiStatus() {
            try {
                const response = await fetch('/health');
                if (response.ok) {
                    statusText.textContent = '‚úì API –û–Ω–ª–∞–π–Ω';
                    statusText.style.color = '#4caf50';
                } else {
                    statusText.textContent = '‚úó API –û—Ñ–ª–∞–π–Ω';
                    statusText.style.color = '#f44336';
                }
            } catch (e) {
                statusText.textContent = '‚úó API –û—Ñ–ª–∞–π–Ω';
                statusText.style.color = '#f44336';
            }
        }

        if (statusBtn) {
            statusBtn.addEventListener('click', () => {
                statusText.textContent = '–ü—Ä–æ–≤–µ—Ä–∫–∞...';
                statusText.style.color = '#666';
                checkApiStatus();
            });
            // –ù–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ - —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏
        }

        // API Base URL
        const API_BASE_URL = 'https://download.dreampartners.online';

        // Helper function to show result
        function showResult(elementId, data, isError = false, isLoading = false) {
            const resultEl = document.getElementById(elementId);
            if (!resultEl) return;

            resultEl.className = 'test-result show';
            
            if (isLoading) {
                resultEl.className += ' loading';
                resultEl.innerHTML = `
                    <div class="test-result-title">
                        <span class="loading-spinner"></span>
                        <span>–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞...</span>
                    </div>
                `;
                return;
            }

            if (isError) {
                resultEl.className += ' error';
                resultEl.innerHTML = `
                    <div class="test-result-title">
                        <i class="ph ph-x-circle"></i>
                        <span>–û—à–∏–±–∫–∞</span>
                    </div>
                    <div class="test-result-content">${typeof data === 'string' ? data : JSON.stringify(data, null, 2)}</div>
                `;
            } else {
                resultEl.className += ' success';
                resultEl.innerHTML = `
                    <div class="test-result-title">
                        <i class="ph ph-check-circle"></i>
                        <span>–£—Å–ø–µ—à–Ω–æ</span>
                    </div>
                    <div class="test-result-content">${typeof data === 'string' ? data : JSON.stringify(data, null, 2)}</div>
                `;
            }
        }

        // Helper function to format file size
        function formatFileSize(bytes) {
            if (!bytes) return 'N/A';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];
        }

        // Download Test
        const downloadForm = document.getElementById('test-download-form');
        if (downloadForm) {
            downloadForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const url = document.getElementById('test-download-url').value;
                const btn = document.getElementById('test-download-btn');
                
                btn.disabled = true;
                showResult('test-download-result', '', false, true);

                try {
                    const response = await fetch(`${API_BASE_URL}/download`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ url })
                    });

                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        let resultHtml = JSON.stringify(data, null, 2);
                        
                        // Add formatted file info
                        if (data.files && data.files.length > 0) {
                            resultHtml += '\n\nüìÅ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–∞—Ö:\n';
                            data.files.forEach((file, idx) => {
                                resultHtml += `\n–§–∞–π–ª ${idx + 1}:\n`;
                                resultHtml += `  ‚Ä¢ –ò–º—è: ${file.filename}\n`;
                                resultHtml += `  ‚Ä¢ –†–∞–∑–º–µ—Ä: ${formatFileSize(file.size)}\n`;
                                resultHtml += `  ‚Ä¢ –¢–∏–ø: ${file.media_type || 'N/A'}\n`;
                                if (file.url) {
                                    resultHtml += `  ‚Ä¢ –°—Å—ã–ª–∫–∞: ${file.url}\n`;
                                }
                                if (file.bot_link) {
                                    resultHtml += `  ‚Ä¢ Bot Link: ${file.bot_link}\n`;
                                }
                                if (file.telegram_file_id) {
                                    resultHtml += `  ‚Ä¢ Telegram File ID: ${file.telegram_file_id.substring(0, 30)}...\n`;
                                }
                                if (file.cache_id) {
                                    resultHtml += `  ‚Ä¢ Cache ID: ${file.cache_id}\n`;
                                }
                            });
                        }
                        
                        if (data.cached) {
                            resultHtml += '\n\n‚úÖ –§–∞–π–ª –≤–∑—è—Ç –∏–∑ –∫—ç—à–∞';
                        } else {
                            resultHtml += '\n\n‚¨áÔ∏è –§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω –∑–∞–Ω–æ–≤–æ';
                        }

                        showResult('test-download-result', resultHtml, false);
                    } else {
                        showResult('test-download-result', data, true);
                    }
                } catch (error) {
                    showResult('test-download-result', `–û—à–∏–±–∫–∞: ${error.message}`, true);
                } finally {
                    btn.disabled = false;
                }
            });
        }

        // Transcribe Test - URL
        const transcribeUrlBtn = document.getElementById('test-transcribe-url-btn');
        if (transcribeUrlBtn) {
            transcribeUrlBtn.addEventListener('click', async () => {
                const url = document.getElementById('test-transcribe-url').value;
                if (!url) {
                    showResult('test-transcribe-result', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ URL', true);
                    return;
                }

                transcribeUrlBtn.disabled = true;
                showResult('test-transcribe-result', '', false, true);

                try {
                    const response = await fetch(`${API_BASE_URL}/transcribe`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ url })
                    });

                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        let resultHtml = `–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:\n\n${data.text || '–¢–µ–∫—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'}`;
                        resultHtml += `\n\n${JSON.stringify(data, null, 2)}`;
                        showResult('test-transcribe-result', resultHtml, false);
                    } else {
                        showResult('test-transcribe-result', data, true);
                    }
                } catch (error) {
                    showResult('test-transcribe-result', `–û—à–∏–±–∫–∞: ${error.message}`, true);
                } finally {
                    transcribeUrlBtn.disabled = false;
                }
            });
        }

        // Transcribe Test - File
        const transcribeFileBtn = document.getElementById('test-transcribe-file-btn');
        if (transcribeFileBtn) {
            transcribeFileBtn.addEventListener('click', async () => {
                const fileInput = document.getElementById('test-transcribe-file');
                const file = fileInput.files[0];
                
                if (!file) {
                    showResult('test-transcribe-result', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª', true);
                    return;
                }

                transcribeFileBtn.disabled = true;
                showResult('test-transcribe-result', '', false, true);

                try {
                    const formData = new FormData();
                    formData.append('file', file);

                    const response = await fetch(`${API_BASE_URL}/transcribe`, {
                        method: 'POST',
                        body: formData
                    });

                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        let resultHtml = `–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:\n\n${data.text || '–¢–µ–∫—Å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω'}`;
                        resultHtml += `\n\n${JSON.stringify(data, null, 2)}`;
                        showResult('test-transcribe-result', resultHtml, false);
                    } else {
                        showResult('test-transcribe-result', data, true);
                    }
                } catch (error) {
                    showResult('test-transcribe-result', `–û—à–∏–±–∫–∞: ${error.message}`, true);
                } finally {
                    transcribeFileBtn.disabled = false;
                }
            });
        }

        // Summary Test - Tab switching
        const summaryTabs = document.querySelectorAll('#test-summary-form .test-tab');
        summaryTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const targetTab = tab.dataset.tab;
                
                // Remove active class from all tabs and contents
                summaryTabs.forEach(t => t.classList.remove('active'));
                document.querySelectorAll('#test-summary-form .test-tab-content').forEach(c => c.classList.remove('active'));
                
                // Add active class to clicked tab and corresponding content
                tab.classList.add('active');
                document.getElementById(`test-summary-tab-${targetTab}`).classList.add('active');
            });
        });

        // Summary Test
        const summaryForm = document.getElementById('test-summary-form');
        if (summaryForm) {
            summaryForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const btn = document.getElementById('test-summary-btn');
                
                // Determine active tab
                const activeTab = document.querySelector('#test-summary-form .test-tab.active').dataset.tab;
                let text = '';
                let useTranscribe = false;
                let transcribeUrl = null;
                let transcribeFile = null;

                if (activeTab === 'text') {
                    text = document.getElementById('test-summary-text').value.trim();
                    if (!text) {
                        showResult('test-summary-result', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç', true);
                        return;
                    }
                } else if (activeTab === 'url') {
                    transcribeUrl = document.getElementById('test-summary-url').value.trim();
                    if (!transcribeUrl) {
                        showResult('test-summary-result', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ URL', true);
                        return;
                    }
                    useTranscribe = true;
                } else if (activeTab === 'file') {
                    const fileInput = document.getElementById('test-summary-file');
                    transcribeFile = fileInput.files[0];
                    if (!transcribeFile) {
                        showResult('test-summary-result', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª', true);
                        return;
                    }
                    useTranscribe = true;
                }

                btn.disabled = true;
                showResult('test-summary-result', '', false, true);

                try {
                    // If URL or file, first transcribe, then summarize
                    if (useTranscribe) {
                        let transcriptionResponse;
                        
                        if (transcribeUrl) {
                            // Transcribe from URL
                            transcriptionResponse = await fetch(`${API_BASE_URL}/transcribe`, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({ url: transcribeUrl })
                            });
                        } else if (transcribeFile) {
                            // Transcribe from file
                            const formData = new FormData();
                            formData.append('file', transcribeFile);
                            transcriptionResponse = await fetch(`${API_BASE_URL}/transcribe`, {
                                method: 'POST',
                                body: formData
                            });
                        }

                        const transcriptionData = await transcriptionResponse.json();
                        
                        if (transcriptionData.status !== 'success' || !transcriptionData.text) {
                            showResult('test-summary-result', `–û—à–∏–±–∫–∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏: ${transcriptionData.message || '–ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å'}`, true);
                            btn.disabled = false;
                            return;
                        }

                        text = transcriptionData.text;
                        showResult('test-summary-result', '–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∞–º–º–∞—Ä–∏...', false, true);
                    }

                    // Generate summary
                    let summaryData = null;
                    let summaryError = null;
                    
                    try {
                        const response = await fetch(`${API_BASE_URL}/summary`, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ text })
                        });
                        summaryData = await response.json();
                    } catch (error) {
                        summaryError = error.message;
                    }
                    
                    // Build result - show what we have even if summary failed
                    let resultHtml = '';
                    
                    if (summaryData && summaryData.status === 'success' && summaryData.summary) {
                        resultHtml += `‚úÖ –°–∞–º–º–∞—Ä–∏:\n\n${summaryData.summary}\n\n`;
                    } else {
                        resultHtml += `‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∞–º–º–∞—Ä–∏`;
                        if (summaryData && summaryData.message) {
                            resultHtml += `: ${summaryData.message}`;
                        } else if (summaryError) {
                            resultHtml += `: ${summaryError}`;
                        }
                        resultHtml += `\n\n`;
                    }
                    
                    // Always show transcription if we have it
                    if (useTranscribe && text) {
                        resultHtml += `üìù –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç:\n${text}\n\n`;
                    } else if (!useTranscribe && text) {
                        resultHtml += `üìù –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç:\n${text.substring(0, 500)}${text.length > 500 ? '...' : ''}\n\n`;
                    }
                    
                    // Show full response if available
                    if (summaryData) {
                        resultHtml += `–ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç API:\n${JSON.stringify(summaryData, null, 2)}`;
                    }
                    
                    // Show as success if we have transcription, even if summary failed
                    const hasContent = text && text.trim().length > 0;
                    showResult('test-summary-result', resultHtml, !hasContent);
                } catch (error) {
                    showResult('test-summary-result', `–û—à–∏–±–∫–∞: ${error.message}`, true);
                } finally {
                    btn.disabled = false;
                }
            });
        }

        // History Get Test
        const historyGetBtn = document.getElementById('test-history-get-btn');
        if (historyGetBtn) {
            historyGetBtn.addEventListener('click', async () => {
                historyGetBtn.disabled = true;
                showResult('test-history-result', '', false, true);

                try {
                    const response = await fetch(`${API_BASE_URL}/api/history`);
                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        let resultHtml = '';
                        if (data.history && data.history.length > 0) {
                            resultHtml += `–ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: ${data.history.length}\n\n`;
                            data.history.forEach((item, idx) => {
                                resultHtml += `–ó–∞–ø–∏—Å—å ${idx + 1}:\n`;
                                resultHtml += `  ‚Ä¢ ID: ${item.id}\n`;
                                resultHtml += `  ‚Ä¢ –§–∞–π–ª: ${item.filename || 'N/A'}\n`;
                                resultHtml += `  ‚Ä¢ –†–∞–∑–º–µ—Ä: ${formatFileSize(item.size)}\n`;
                                resultHtml += `  ‚Ä¢ URL: ${item.url || 'N/A'}\n`;
                                resultHtml += `  ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–æ: ${item.added_at || 'N/A'}\n\n`;
                            });
                        } else {
                            resultHtml = '–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞\n\n';
                        }
                        resultHtml += JSON.stringify(data, null, 2);
                        showResult('test-history-result', resultHtml, false);
                    } else {
                        showResult('test-history-result', data, true);
                    }
                } catch (error) {
                    showResult('test-history-result', `–û—à–∏–±–∫–∞: ${error.message}`, true);
                } finally {
                    historyGetBtn.disabled = false;
                }
            });
        }

        // History Delete Test
        const historyDeleteForm = document.getElementById('test-history-delete-form');
        if (historyDeleteForm) {
            historyDeleteForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const fileId = document.getElementById('test-history-delete-id').value;
                const btn = document.getElementById('test-history-delete-btn');
                
                btn.disabled = true;
                showResult('test-history-delete-result', '', false, true);

                try {
                    const response = await fetch(`${API_BASE_URL}/api/history/${fileId}`, {
                        method: 'DELETE'
                    });

                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        showResult('test-history-delete-result', `–§–∞–π–ª ${fileId} —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏\n\n${JSON.stringify(data, null, 2)}`, false);
                    } else {
                        showResult('test-history-delete-result', data, true);
                    }
                } catch (error) {
                    showResult('test-history-delete-result', `–û—à–∏–±–∫–∞: ${error.message}`, true);
                } finally {
                    btn.disabled = false;
                }
            });
        }

        // Telegram Upload Test
        const telegramUploadForm = document.getElementById('test-telegram-upload-form');
        if (telegramUploadForm) {
            telegramUploadForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const fileId = document.getElementById('test-telegram-upload-file-id').value;
                const btn = document.getElementById('test-telegram-upload-btn');
                
                btn.disabled = true;
                showResult('test-telegram-upload-result', '', false, true);

                try {
                    const response = await fetch(`${API_BASE_URL}/api/telegram/upload`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ file_id: fileId })
                    });

                    const data = await response.json();
                    
                    if (data.status === 'success') {
                        let resultHtml = '';
                        if (data.bot_link) {
                            resultHtml += `üîó Bot Link: ${data.bot_link}\n\n`;
                        }
                        if (data.cache_id) {
                            resultHtml += `üì¶ Cache ID: ${data.cache_id}\n\n`;
                        }
                        if (data.telegram_file_id) {
                            resultHtml += `üìé Telegram File ID: ${data.telegram_file_id.substring(0, 30)}...\n\n`;
                        }
                        if (data.message) {
                            resultHtml += `üí¨ ${data.message}\n\n`;
                        }
                        resultHtml += JSON.stringify(data, null, 2);
                        showResult('test-telegram-upload-result', resultHtml, false);
                    } else {
                        showResult('test-telegram-upload-result', data, true);
                    }
                } catch (error) {
                    showResult('test-telegram-upload-result', `–û—à–∏–±–∫–∞: ${error.message}`, true);
                } finally {
                    btn.disabled = false;
                }
            });
        }

        // Process Test (Full Cycle)
        const processForm = document.getElementById('test-process-form');
        if (processForm) {
            processForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const url = document.getElementById('test-process-url').value;
                const btn = document.getElementById('test-process-btn');
                
                btn.disabled = true;
                showResult('test-process-result', '–ù–∞—á–∞–ª–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏... –≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è.\n\n–≠—Ç–∞–ø 1: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞...', false, true);

                try {
                    const response = await fetch(`${API_BASE_URL}/api/process`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ url })
                    });

                    const data = await response.json();
                    
                    // Build result showing all available steps, even if some failed
                    let resultHtml = '';
                    let hasSuccess = false;
                    let hasError = false;
                    
                    // Check if we have file (download step)
                    if (data.file) {
                        resultHtml += `‚úÖ –§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω:\n`;
                        resultHtml += `  ‚Ä¢ ID: ${data.file.id}\n`;
                        resultHtml += `  ‚Ä¢ –ò–º—è: ${data.file.filename}\n`;
                        resultHtml += `  ‚Ä¢ –†–∞–∑–º–µ—Ä: ${formatFileSize(data.file.size)}\n`;
                        resultHtml += `  ‚Ä¢ URL: ${data.file.url}\n\n`;
                        hasSuccess = true;
                    }
                    
                    // Check if we have transcription
                    if (data.transcription) {
                        resultHtml += `‚úÖ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞:\n${data.transcription.substring(0, 300)}${data.transcription.length > 300 ? '...' : ''}\n\n`;
                        hasSuccess = true;
                    }
                    
                    // Check if we have summary
                    if (data.summary) {
                        resultHtml += `‚úÖ –°–∞–º–º–∞—Ä–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ:\n${data.summary}\n\n`;
                        hasSuccess = true;
                    } else if (data.transcription) {
                        // If we have transcription but no summary, it means summary failed
                        resultHtml += `‚ö†Ô∏è –°–∞–º–º–∞—Ä–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å`;
                        if (data.summary_error) {
                            resultHtml += `: ${data.summary_error}`;
                        } else if (data.message && data.message.includes('summary')) {
                            resultHtml += `: ${data.message}`;
                        }
                        resultHtml += `\n\n`;
                        hasError = true;
                    }
                    
                    // Show status
                    if (data.status === 'success' || hasSuccess) {
                        if (hasError) {
                            resultHtml = `‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏\n\n${resultHtml}`;
                        } else {
                            resultHtml = `‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω!\n\n${resultHtml}`;
                        }
                    } else {
                        resultHtml = `‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏\n\n${resultHtml}`;
                    }
                    
                    // Show full response
                    resultHtml += `\n–ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç API:\n${JSON.stringify(data, null, 2)}`;
                    
                    // Show as success if we have at least file or transcription
                    showResult('test-process-result', resultHtml, !hasSuccess);
                } catch (error) {
                    showResult('test-process-result', `–û—à–∏–±–∫–∞: ${error.message}`, true);
                } finally {
                    btn.disabled = false;
                }
            });
        }

    </script>
</body>
</html>

